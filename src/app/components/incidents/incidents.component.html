
<h4 class="text-center">Resolution</h4>
<div class="container-fluid">
    <div class="row content">
        <div class="col">
            <h4 id="heding" class="">INCIDENTS</h4>

            <button *ngIf="us.currentUser.type ==='Dispatcher'" class="btn btn-class" (click)="braa()" routerLink="/incidents/newincident">New&nbsp;<i class="fa fa-plus"></i></button>

              Filter by&nbsp;
              <select  style="width: 100px;" [(ngModel)]="filter" (change)="filterChange()">
                  <option value="All">All</option>
                  <option value="Mine">Mine</option>
              </select>
              <select [(ngModel)]="searchStatus">
                <option value="" disabled hidden selected>Status...</option>
                <option value="Drafted">Drafted</option>
                <option value="Canceled">Canceled</option>
                <option value="Executing">Executing</option>
                <option value="Complited">Complited</option>
            </select>
            <select [(ngModel)]="searchType">
              <option value="" disabled hidden selected>Type...</option>
              <option value="planned">Planned</option>
              <option value="unplanned">Unplanned</option>
          </select>
            <button style="width: 10%;" (click)="search()"  id="filter" class="btn btn-class">Filter&nbsp;<i class="fa fa-filter"></i></button>
            <button style="width: 10%;" (click)="reset()" class="btn btn-danger"><i class="fa fa-refresh"></i></button>
            <table  id="incidentsTable"  mdbTableScroll [scrollX]='true' maxWidth="1000" class="table  table-hover">
                <thead>
                <tr>
                     <th scope="col" class="sticky-col first-col" aria-controls="incidentsTable" [mdbTableSort]="incidents" [sortBy]="headElements[0]">Id&nbsp;<i class="fa fa-sort"></i></th>
                    <th scope="col"  class="sticky-col second-col" aria-controls="incidentsTable" [mdbTableSort]="incidents" [sortBy]="headElements[1]">Start Date&nbsp;<i class="fa fa-sort"></i></th>
                    <th scope="col" aria-controls="incidentsTable" [mdbTableSort]="incidents" [sortBy]="headElements[4]">Status&nbsp;<i class="fa fa-sort"></i></th>
                    <th scope="col" aria-controls="incidentsTable" [mdbTableSort]="incidents" [sortBy]="headElements[3]" >Address&nbsp;<i class="fa fa-sort"></i></th>
                    <th scope="col" aria-controls="incidentsTable" [mdbTableSort]="incidents" [sortBy]="headElements[5]" >Type&nbsp;<i class="fa fa-sort"></i></th>
                    <th scope="col" aria-controls="incidentsTable" [mdbTableSort]="incidents" [sortBy]="headElements[6]" >Priority&nbsp;<i class="fa fa-sort"></i></th>
                    <th scope="col" aria-controls="incidentsTable" [mdbTableSort]="incidents" [sortBy]="headElements[7]" >Confirmed&nbsp;<i class="fa fa-sort"></i></th>
                    <th scope="col" aria-controls="incidentsTable" [mdbTableSort]="incidents" [sortBy]="headElements[8]" >ETA&nbsp;<i class="fa fa-sort"></i></th>
                    <th scope="col" aria-controls="incidentsTable" [mdbTableSort]="incidents" [sortBy]="headElements[9]" >ATA&nbsp;<i class="fa fa-sort"></i></th>
                    <th scope="col" aria-controls="incidentsTable" [mdbTableSort]="incidents" [sortBy]="headElements[10]" >ETR&nbsp;<i class="fa fa-sort"></i></th>
                    <th scope="col" aria-controls="incidentsTable" [mdbTableSort]="incidents" [sortBy]="headElements[11]" >Affected Customers&nbsp;<i class="fa fa-sort"></i></th>
                    <th scope="col" aria-controls="incidentsTable" [mdbTableSort]="incidents" [sortBy]="headElements[12]" >No. Of Calls&nbsp;<i class="fa fa-sort"></i></th>
                    <th scope="col" aria-controls="incidentsTable" [mdbTableSort]="incidents" [sortBy]="headElements[13]" >Voltage&nbsp;<i class="fa fa-sort"></i></th>
                    <th>&nbsp;</th>
                  </tr>
                </thead>
             <tbody>
                <tr mdbTableCol *ngFor="let incident of incidents | slice: (page - 1) * pageSize : page * pageSize ">
                    <td  class="sticky-col first-col" >{{incident.id}}</td>
                    <td  class="sticky-col second-col" >{{incident.timeOfIncident}}</td>
                    <td>{{incident.status}}</td>
                    <td >{{incident.address}}</td>
                    <td>{{incident.type}}</td>
                    <td >{{incident.priority}}</td>
                    <td >{{incident.confirmed}}</td>
                    <td>{{incident.eta}}</td>
                    <td >{{incident.ata}}</td>
                    <td>{{incident.etr}}</td>
                    <td >{{incident.affectedConsumers}}</td>
                    <td >{{incident.calls}}</td>
                    <td >{{incident.voltage}}</td>
                    <td>
                      <a   *ngIf="us.currentUser.type ==='Dispatcher'" style="width: 45%;" class="btn btn-danger" (click)="delete(incident)"><i class="fa fa-trash fa-lg"></i></a>&nbsp;
                   <!--  <a style="width: 45%;" class="btn btn-info" (click)="details(incident)"><i class="fa fa-info-circle fa-lg"></i></a>-->
                  </td>
                </tr>
                </tbody>
                <tfoot>
                  <ngb-pagination
                    [(page)]="page"
                    [pageSize] = "pageSize"
                    [collectionSize]="incidents.length"
                  ></ngb-pagination>
                </tfoot>
            </table>

        </div>

        </div>
    </div>

